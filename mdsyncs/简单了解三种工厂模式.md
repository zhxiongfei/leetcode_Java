---
title: "è®¾è®¡æ¨¡å¼ä¹‹æŠ½è±¡å·¥å‚æ¨¡å¼"
date: 2020-07-04T14:46:20+08:00
draft: true
tags: ["è®¾è®¡æ¨¡å¼"]
---

# éœ€æ±‚

æš‚ä¸”ä¸æå·¥å‚æ¨¡å¼ï¼Œ æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸ªç®€å•çš„éœ€æ±‚, ç„¶åé€šè¿‡è¿™ä¸ªéœ€æ±‚çš„æ”¹è¿›è¿‡ç¨‹äº†è§£**å·¥å‚æ¨¡å¼**ã€‚ éœ€æ±‚å¦‚ä¸‹ : 

å‡è®¾ç°åœ¨ï¼Œæˆ‘æœ‰ä¸€è¾†è½¦**Car**ï¼Œå®ƒæœ‰ä¸€ä¸ª **go()** æ–¹æ³•, ä»£ç å¾ˆç®€å•ï¼Œå¦‚ä¸‹ : 

```java
public class Car {
    public void go(){
        System.out.println("Car run ~");
    }
}
```



æˆ‘ä»¬åŒæ—¶æœ‰ä¸€è¾†æ–°çš„äº¤é€šå·¥å…·é£æœº **Airplane**, åŒæ ·ä¹Ÿæœ‰ä¸€ä¸ª **go()** æ–¹æ³•, ä»£ç å¦‚ä¸‹ : 

```java
public class Airplane {
    public void go(){
        System.out.println("Airplane fly ~");
    }
}
```



è¿™æ—¶ï¼Œå¦‚æœæˆ‘ä»¬ç¬¬ä¸€æ¬¡åğŸš—Car,  ç„¶åå†åâœˆï¸é£æœºï¼Œä»£ç å°±å¾—è¿™æ ·å†™ï¼š

```java
    public static void main(String[] args) {
//        Car c = new Car();
//        c.go();
        Airplane a = new Airplane();
        a.go();
    }
```

åœ¨åè½¦æ—¶ï¼Œ newä¸€ä¸ª ğŸš—å¯¹è±¡ï¼ŒğŸš—.go().   

åœ¨åé£æœºæ—¶ï¼Œnew ä¸€ä¸ªâœˆï¸å¯¹è±¡ï¼Œ âœˆï¸go().



è¿™æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬åˆè¦åç«è½¦ğŸš„å‘¢ï¼Ÿ 

æˆ‘ä»¬è¦åšçš„å°±æ˜¯ï¼Œå†æ·»åŠ ä¸€ä¸ª **Train**ç±»ï¼Œå¹¶å®ç° ğŸš„çš„ go() æ–¹æ³•ã€‚ å¹¶åœ¨ main å‡½æ•°ä¸­ new ä¸€ä¸ªğŸš„å¯¹è±¡ï¼Œ**ğŸš„.go()**;



æ‰€ä»¥ï¼Œæ¯æ¬¡æ·»åŠ ä¸€ç§äº¤é€šå·¥å…·ï¼Œæˆ‘ä»¬éƒ½éœ€è¦æ·»åŠ ç±»ï¼Œå¹¶å®ç° go() æ–¹æ³•ã€‚ æœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•ï¼Œå¯æ‰©å±•æ€§æ›´å¥½å‘¢? 

ç­”æ¡ˆå°±æ˜¯ï¼Œä¸ºäº¤é€šå·¥å…·å»ºä¸€ä¸ªçˆ¶ç±»ã€‚åˆ©ç”¨é¢å‘å¯¹è±¡çš„å¤šæ€ï¼Œå¢åŠ å¯æ‰©å±•æ€§ã€‚

- åœ¨Javaä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨  æŠ½è±¡çˆ¶ç±» **abstract class** è§£å†³
- ä¹Ÿå¯ä»¥ä½¿ç”¨ **interface**æ¥å£è§£å†³ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ **interface**è§£å†³
  - æ–°å»ºä¸€ä¸ª **interface** æ¥å£ **Moveable**ï¼Œå…¶ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³• **go()**
  - å¹¶ä¸”è®©æˆ‘ä»¬æ‰€æœ‰çš„äº¤é€šå·¥å…·éƒ½å®ç° **Moveable** æ¥å£çš„æ–¹æ³• **go()**

```java
public interface Moveable {
    public void go();
}
```

```java
public class Car implements Moveable{
    @Override
    public void go() {
        System.out.println("Car run ~");
    }
}
```

```java
public class Airplane implements Moveable{
    @Override
    public void go() {
        System.out.println("Airplane run ~");
    }
}
```



è¿™æ—¶ï¼ŒMainå‡½æ•°ä¸­çš„ä»£ç å°±å¯ä»¥è¿™æ ·å†™

```java
public static void main(String[] args) {
    Moveable c = new Car();
    c.go();
    Moveable m = new Airplane();
    m.go();
}
```



ä»¥ä¸Šæ˜¯**å¤šæ€**çš„ç®€å•è¿ç”¨ã€‚

æˆ‘ä»¬åˆæœ‰æ–°çš„éœ€æ±‚ï¼Ÿ **å®šåˆ¶ç”Ÿäº§è¿‡ç¨‹**ï¼Œ ä¹Ÿå°±æ˜¯ï¼Œåœ¨ new Car() çš„å‰åï¼Œéœ€è¦åšä¸€äº›äº‹æƒ…ã€‚ å¦‚æœæŒ‰ç…§ä¸Šè¾¹æ–¹æ³•åšï¼Œå°±éœ€è¦åœ¨**main** å‡½æ•°ä¸­ä¸€é€šä¿®æ”¹ã€‚å¦‚æœæ›´æ–¹ä¾¿çš„å®šåˆ¶ç”Ÿäº§è¿‡ç¨‹ï¼Ÿ å¼•å…¥äº†æˆ‘ä»¬çš„ä¸»è§’ï¼Œ**å·¥å‚æ¨¡å¼**ã€‚

# å®šä¹‰

ä»€ä¹ˆæ˜¯**å·¥å‚**å‘¢ï¼Ÿ

- ä»»ä½•å¯ä»¥äº§ç”Ÿå¯¹è±¡çš„æ–¹æ³•æˆ–ç±»ï¼Œéƒ½å¯ä»¥ç§°ä¹‹ä¸º**å·¥å‚**
- å•ä¾‹ä¹Ÿæ˜¯ä¸€ç§**å·¥å‚**
- å·¥å‚ä¸»è¦æœ‰ä¸‰ç§
  - **ç®€å•å·¥å‚**
  - **å·¥å‚æ–¹æ³•**
  - **æŠ½è±¡å·¥å‚**

## ä¸€ï¼Œç®€å•å·¥å‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡ï¼Œç®€å•å·¥å‚æ¨¡å¼ï¼Œæ¥è§£å†³ **å®šåˆ¶ç”Ÿäº§è¿‡ç¨‹** çš„é—®é¢˜

- æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª **VehicelFactory** ï¼Œæ­¤ç±»ä¸“é—¨ç”¨æ¥ç”Ÿäº§å„ç§äº¤é€šå·¥å…·
- è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ å·¥å‚ç±»ä¸­ï¼Œå®šåˆ¶ç”Ÿäº§äº¤é€šå·¥å…·æ—¶ä¸šåŠ¡é€»è¾‘æ‰€éœ€è¦çš„è¿‡ç¨‹

```java
public class VehicelFactory {
    public static Car createCar(){
        // è¿™é‡Œå¯ä»¥å¤„ç†ä¸šåŠ¡é€»è¾‘æ‰€éœ€è¦çš„å®šåˆ¶è¿‡ç¨‹
        return new Car();
    }
    
    public static Airplane createAirplane(){
        // è¿™é‡Œå¯ä»¥å¤„ç†ä¸šåŠ¡é€»è¾‘æ‰€éœ€è¦çš„å®šåˆ¶è¿‡ç¨‹
        return new Airplane();
    }
}
```

æˆ‘ä»¬**main** å‡½æ•°å¤„çš„ä»£ç å°±ç®€å•äº†

```Java
public static void main(String[] args) {
    Moveable c = VehicelFactory.createCar();
    c.go();
    Moveable m = VehicelFactory.createAirplane();
    m.go();
}
```



- ä»¥ä¸Šå°±æ˜¯**ç®€å•å·¥å‚æ¨¡å¼**çš„ä¸€ä¸ªåº”ç”¨
- æœ‰ä¸€äº›ç¼ºç‚¹
  - æ‰©å±•æ€§å¹¶ä¸å¥½
    - å¢åŠ ä¸€ç§äº¤é€šå·¥å…·ï¼Œå°±éœ€è¦åœ¨ **VehicelFactory**ä¸­åˆ›å»ºæ–¹æ³•ï¼Œå’Œä¸€å¤§å †çš„ä¸šåŠ¡é€»è¾‘
    - éšç€ä¸šåŠ¡é€»è¾‘å˜å¤šï¼Œ**VehicelFactory** ä¼šå˜å¾—è¶Šæ¥è¶Šåºå¤§ï¼Œéš¾ä»¥ç»´æŠ¤



å¦‚ä½•è§£å†³ï¼Œ**VehicelFactory** ä¸å¥½æ‰©å±•çš„é—®é¢˜å‘¢ ? ç­”æ¡ˆå°±æ˜¯: å·¥å‚æ–¹æ³• 



## äºŒï¼Œå·¥å‚æ–¹æ³•

- å·¥å‚æ–¹æ³•ï¼Œä¹Ÿæ˜¯ä½¿ç”¨å·¥å‚ç±»åˆ›å»ºäº¤é€šå·¥å…·
- ä¸åŒä¹‹å¤„åœ¨äºï¼Œå·¥å‚æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸ªç±»ï¼Œåˆ›å»ºä¸€ä¸ª **Factory**ç”¨äºå®šåˆ¶å…¶ç”Ÿäº§è¿‡ç¨‹ã€‚
  - æ¯”å¦‚ï¼Œæˆ‘ä»¬ä¸º Caråˆ›å»ºä¸€ä¸ª **CarFactory** ç±»ç”Ÿäº§ ğŸš—
  - ä¸º Airplaneåˆ›å»ºä¸€ä¸ª **AirplaneFactory**ç±» ç”Ÿäº§ âœˆï¸
- å¾ˆæ˜¾ç„¶ï¼Œå·¥å‚æ–¹æ³•ä¸ä¼šäº§ç”Ÿåºå¤§çš„ **VehicelFactory** å·¥å‚
- å¢åŠ ä¸€ç§äº¤é€šå·¥å…·æ—¶ï¼Œä¸ºæ–°çš„äº¤é€šå·¥å…·åˆ›å»ºå¯¹åº”çš„ **Factory** å³å¯

ä»£ç å¦‚ä¸‹ : 

```java
public class AirplaneFactory{
    public static Moveable create(){
        // è¿™é‡Œå¯ä»¥å¤„ç†ä¸šåŠ¡é€»è¾‘æ‰€éœ€è¦çš„å®šåˆ¶è¿‡ç¨‹
        return new Airplane();
    }
}
```

```java
public class CarFactory {
    public static Moveable create(){
        // è¿™é‡Œå¯ä»¥å¤„ç†ä¸šåŠ¡é€»è¾‘æ‰€éœ€è¦çš„å®šåˆ¶è¿‡ç¨‹
        return new Car();
    }
}
```

```java
public static void main(String[] args) {
    Moveable c = CarFactory.create();
    c.go();
}
```

- è¿™æ ·æˆ‘ä»¬å°±è§£å†³äº†ï¼Œåœ¨äº¤é€šå·¥å…·ç±»å¾ˆå¤šæ—¶æ‰©å±•æ€§çš„é—®é¢˜

ç°åœ¨ï¼Œ æˆ‘ä»¬åˆæœ‰æ–°éœ€æ±‚äº†ã€‚ å¦‚ä½•å®šåˆ¶ä¸€ç³»åˆ—çš„äº§å“å‘¢ï¼Ÿ 

æ¯”å¦‚ä¸€ä¸ªç°å®ä¸–ç•Œçš„äººï¼Œå¯ä»¥**ä¸€è¾†è½¦**ï¼Œå¯ä»¥æ‹¿æ­¦å™¨**AK47**ï¼Œå¯ä»¥åƒ**é¢åŒ…**

è€Œä¸€ä¸ªé­”æ³•ä¸–ç•Œçš„äººï¼Œå¯ä»¥ **éª‘æ‰«å¸š**ï¼Œå¯ä»¥æ‹¿æ­¦å™¨**é­”æ³•æ£’**ï¼Œ å¯ä»¥åƒ**è˜‘è‡**

...

å¦‚ä½•æ¥å®šåˆ¶è¿™ä¸€ç±»äººå¯¹åº”çš„ä¸€ç³»åˆ—äº§å“å‘¢ ï¼Ÿ ç­”æ¡ˆå°±æ˜¯ï¼Œ**æŠ½è±¡å·¥å‚æ¨¡å¼**



## ä¸‰ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼(Abstract Factory)

è¿™é‡Œçš„ä¸€ç³»åˆ—äº§å“ï¼Œæ˜¯ä¸€ä¸ª **äº§å“æ—** çš„æ¦‚å¿µï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨**æŠ½è±¡å·¥å‚**æ¥å®ç°çµæ´»çš„æ‰©å±•**äº§å“æ—**ã€‚

-  æˆ‘ä»¬å…ˆå®šä¹‰ä¸€ä¸ª æŠ½è±¡å·¥å‚ **AbstractFactory**ï¼Œå¹¶ä¸”æ­¤ç±»ä¸­ï¼Œæœ‰ä»¥ä¸‹ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•

  ```java
  abstract Food createFood();				// åˆ›å»ºé£Ÿç‰©
  abstract Vehicle createVehicle(); // åˆ›å»ºäº¤é€šå·¥å…·
  abstract Weapon createWeapon();		// åˆ›å»ºæ­¦å™¨
  ```

-  å†å®šä¹‰ä¸¤ä¸ª ç±»å‹çš„å·¥å‚ ,éƒ½ç»§æ‰¿è‡ª **AbstractFactory**,å¹¶ä¸”å®ç° **AbstractFactory** çš„ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•

  - ç°ä»£äººçš„å·¥å‚ **MordernFactory**

    ```java
    public class MordernFactory extends AbstractFactory{
        @Override
        Food createFood() {
            return new Bread();
        }
    
        @Override
        Vehicle createVehicle() {
            return new Car();
        }
    
        @Override
        Weapon createWeapon() {
            return new AK47();
        }
    }
    ```

  - é­”æ³•ä¸–ç•Œçš„äººçš„å·¥å‚ **MagicFactory**

    ```java
    public class MagicFactory extends AbstractFactory {
        @Override
        Food createFood() {
            return new MushRoom();
        }
    
        @Override
        Vehicle createVehicle() {
            return new Broom();
        }
    
        @Override
        Weapon createWeapon() {
            return new MagicStick();
        }
    }
    ```

  - ...

- å®šä¹‰ä¸‰ä¸ª æŠ½è±¡ç±»

  - **Food** æŠ½è±¡çš„é£Ÿç‰©ç±», å¹¶ä¸”å…¶ä¸­æœ‰ eat() æŠ½è±¡æ–¹æ³•
    - ä½¿**MushRoom** å’Œ **Bread** éƒ½ç»§æ‰¿ Foodã€‚å¹¶ä¸”å®ç° **eat()** æ–¹æ³•
  - **Weapon** æŠ½è±¡çš„æ­¦å™¨ç±»ï¼Œå¹¶ä¸”å…¶ä¸­æœ‰ attack() æŠ½è±¡æ–¹æ³•
    - ä½¿**AK47** å’Œ **MagicStick**éƒ½ç»§æ‰¿è‡ª Weaponã€‚å¹¶ä¸”å®ç° **attack()** æ–¹æ³•
  - **Vehicle** æŠ½è±¡çš„äº¤é€šå·¥å…·ç±»ï¼Œå¹¶ä¸”æœ‰ go() æŠ½è±¡æ–¹æ³•
    - ä½¿**Car** å’Œ **Broom** éƒ½ç»§æ‰¿è‡ª Vehileã€‚ å¹¶ä¸”å®ç° **go()** æ–¹æ³•

- åœ¨mainå‡½æ•°ä¸­ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦ï¼Œä½¿ç”¨å¯¹åº”çš„å…·ä½“çš„**å·¥å‚**ï¼Œè°ƒç”¨æ–¹æ³•å³å¯.

  ```java
      public static void main(String[] args) {
  //        AbstractFactory abstractFactory = new MagicFactory();
          AbstractFactory abstractFactory = new MordernFactory();
          abstractFactory.createFood().eat();
          abstractFactory.createVehicle().go();
          abstractFactory.createWeapon().attack();
      }
  ```

- ä»¥ä¸Šå°±æ˜¯ï¼Œä¸‰ç§å·¥å‚æ¨¡å¼çš„ä½¿ç”¨ä¾‹å­ã€‚



# æ€»ç»“

ä»¥ä¸Šä¸‰ç§å·¥å‚æ¨¡å¼æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹å‘¢ï¼Ÿ

- **å·¥å‚æ–¹æ³•**ï¼Œæ–¹ä¾¿çš„æ˜¯**äº§å“çš„æ‰©å±•**
  - **ä¼˜ç‚¹** : å¢åŠ æ–°çš„äº§å“ç±»æ—¶æ— é¡»ä¿®æ”¹ç°æœ‰ç³»ç»Ÿï¼Œå¹¶å°è£…äº†äº§å“å¯¹è±¡çš„åˆ›å»ºç»†èŠ‚ï¼Œç³»ç»Ÿå…·æœ‰è‰¯å¥½çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§
  - **ç¼ºç‚¹** : åœ¨äºå¢åŠ æ–°äº§å“çš„åŒæ—¶éœ€è¦å¢åŠ æ–°çš„å·¥å‚ï¼Œå¯¼è‡´ç³»ç»Ÿç±»çš„ä¸ªæ•°æˆå¯¹å¢åŠ ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚
- **æŠ½è±¡å·¥å‚æ–¹æ³•**ï¼Œæ–¹ä¾¿çš„æ˜¯**äº§å“æ—çš„æ‰©å±•**
  - **ä¼˜ç‚¹** : å¢åŠ æ–°çš„**å·¥å‚å’Œäº§å“æ—**å®¹æ˜“
  - **ç¼ºç‚¹** : å¢åŠ æ–°çš„**äº§å“**ç­‰çº§ç»“æ„éº»çƒ¦
- ä¸¤è€…éƒ½æœ‰è‡ªå·±çš„å±€é™æ€§



